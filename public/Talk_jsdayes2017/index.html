<!DOCTYPE html>
<html lang="en" class="color-toggle-hidden">

<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark" />





    <meta name="description" content="Intro Me Hello, My name is Matjaz, I am working on road management software. This is a 3D viewer that shows scan of a road surface. We display those in browser, generate reports and stuff like that. When I heard of WebAssembly I was very interested because speed of calculations on the client side is very important for us. WebAssembly also makes in convenient to reuse existing C&#43;&#43; libraries in browser.">



    <title>Talk @ JsDayES, 2017, Madrid | WebAssemnbly</title>

    <link rel="icon" href="/favicon/favicon-32x32.png" type="image/x-icon">

    <script src="/js/darkmode-ce906ea916.min.js"></script>

<link rel="preload" as="font" href="/fonts/Metropolis.woff2" type="font/woff2" crossorigin="anonymous">
<link rel="preload" as="font" href="/fonts/LiberationSans.woff2" type="font/woff2" crossorigin="anonymous">

<link rel="preload" href="/main-5caf214477.min.css" as="style">
<link rel="stylesheet" href="/main-5caf214477.min.css" media="all">

<link rel="preload" href="/mobile-249b801e7d.min.css" as="style">
<link rel="stylesheet" href="/mobile-249b801e7d.min.css" media="screen and (max-width: 45rem)">

<link rel="preload" href="/print-f79fc3e5d7.min.css" as="style">
<link rel="stylesheet" href="/print-f79fc3e5d7.min.css" media="print">

<link rel="preload" href="/custom.css" as="style">
<link rel="stylesheet" href="/custom.css" media="all">

<link rel="alternate" type="application/rss+xml" href="http://example.org/Talk_jsdayes2017/index.xml" title="WebAssemnbly" />


<!-- Made with Geekdoc theme https://github.com/thegeeklab/hugo-geekdoc -->

    

</head>

<body itemscope itemtype="https://schema.org/WebPage">
    
<!-- geekdoc include: sprites/geekdoc.svg -->
<svg class="svg-sprite" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><symbol viewBox="-2.29 -2.29 28.57 28.57" id="gdoc_arrow_back" xmlns="http://www.w3.org/2000/svg"><path d="M24 10.526v2.947H5.755l8.351 8.421-2.105 2.105-12-12 12-12 2.105 2.105-8.351 8.421H24z"/></symbol><symbol viewBox="-2.29 -2.29 28.57 28.57" id="gdoc_arrow_left_alt" xmlns="http://www.w3.org/2000/svg"><path d="M5.965 10.526V6.035L0 12l5.965 5.965v-4.491H24v-2.947H5.965z"/></symbol><symbol viewBox="-2.29 -2.29 28.57 28.57" id="gdoc_arrow_right_alt" xmlns="http://www.w3.org/2000/svg"><path d="M18.035 10.526V6.035L24 12l-5.965 5.965v-4.491H0v-2.947h18.035z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_bitbucket" xmlns="http://www.w3.org/2000/svg"><path d="M15.905 13.355c.189 1.444-1.564 2.578-2.784 1.839-1.375-.602-1.375-2.784-.034-3.403 1.151-.705 2.818.223 2.818 1.564zm1.907-.361c-.309-2.44-3.076-4.056-5.328-3.042-1.426.636-2.389 2.148-2.32 3.747.086 2.097 2.08 3.815 4.176 3.626s3.729-2.234 3.472-4.331zm4.108-9.315c-.756-.997-2.045-1.169-3.179-1.358-3.214-.516-6.513-.533-9.727.034-1.066.172-2.269.361-2.939 1.323 1.1 1.031 2.664 1.186 4.073 1.358 2.544.327 5.156.344 7.699.017 1.426-.172 3.008-.309 4.073-1.375zm.979 17.788c-.481 1.684-.206 3.953-1.994 4.932-3.076 1.701-6.806 1.89-10.191 1.289-1.787-.327-3.884-.894-4.864-2.578-.43-1.65-.705-3.334-.98-5.018l.103-.275.309-.155c5.121 3.386 12.288 3.386 17.427 0 .808.241.206 1.22.189 1.805zM26.01 4.951c-.584 3.764-1.255 7.51-1.908 11.257-.189 1.1-1.255 1.719-2.148 2.183-3.214 1.615-6.96 1.89-10.483 1.512-2.389-.258-4.829-.894-6.771-2.389-.911-.705-.911-1.908-1.083-2.922-.602-3.523-1.289-7.046-1.719-10.604.206-1.547 1.942-2.217 3.231-2.698C6.848.654 8.686.362 10.508.19c3.884-.378 7.854-.241 11.618.859 1.341.395 2.784.945 3.695 2.097.412.533.275 1.203.189 1.805z"/></symbol><symbol viewBox="-2.29 -2.29 28.57 28.57" id="gdoc_bookmark" xmlns="http://www.w3.org/2000/svg"><path d="M15.268 4.392q.868 0 1.532.638t.664 1.506v17.463l-7.659-3.268-7.608 3.268V6.536q0-.868.664-1.506t1.532-.638h10.876zm4.34 14.144V4.392q0-.868-.638-1.532t-1.506-.664H6.537q0-.868.664-1.532T8.733 0h10.876q.868 0 1.532.664t.664 1.532v17.412z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_brightness_auto" xmlns="http://www.w3.org/2000/svg"><path d="M16.846 18.938h2.382L15.22 7.785h-2.44L8.772 18.938h2.382l.871-2.44h3.95zm7.087-9.062L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809zm-11.385 4.937L14 10.282l1.452 4.531h-2.904z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_brightness_dark" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079 0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565q-1.51 0-3.079.697 1.917.871 3.108 2.701T15.22 14t-1.191 4.037-3.108 2.701q1.568.697 3.079.697zm9.933-11.559L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_brightness_light" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079 0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565 8.743 8.743 6.565 14t2.178 5.257T14 21.435zm9.933-3.311v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809L27.999 14z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_cloud_off" xmlns="http://www.w3.org/2000/svg"><path d="M9.023 10.5H7q-1.914 0-3.281 1.395t-1.367 3.309 1.367 3.281T7 19.852h11.375zM3.5 4.976l1.477-1.477L24.5 23.022l-1.477 1.477-2.352-2.297H6.999q-2.898 0-4.949-2.051t-2.051-4.949q0-2.844 1.969-4.867t4.758-2.133zm19.086 5.578q2.242.164 3.828 1.832T28 16.351q0 3.008-2.461 4.758l-1.695-1.695q1.805-.984 1.805-3.063 0-1.422-1.039-2.461t-2.461-1.039h-1.75v-.602q0-2.68-1.859-4.539t-4.539-1.859q-1.531 0-2.953.711l-1.75-1.695Q11.431 3.5 14.001 3.5q2.953 0 5.496 2.078t3.09 4.977z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_code" xmlns="http://www.w3.org/2000/svg"><path d="M9.917 24.5a1.75 1.75 0 10-3.501.001 1.75 1.75 0 003.501-.001zm0-21a1.75 1.75 0 10-3.501.001A1.75 1.75 0 009.917 3.5zm11.666 2.333a1.75 1.75 0 10-3.501.001 1.75 1.75 0 003.501-.001zm1.75 0a3.502 3.502 0 01-1.75 3.026c-.055 6.581-4.721 8.039-7.82 9.023-2.898.911-3.846 1.349-3.846 3.117v.474a3.502 3.502 0 011.75 3.026c0 1.932-1.568 3.5-3.5 3.5s-3.5-1.568-3.5-3.5c0-1.294.711-2.424 1.75-3.026V6.526A3.502 3.502 0 014.667 3.5c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5a3.502 3.502 0 01-1.75 3.026v9.06c.93-.456 1.914-.766 2.807-1.039 3.391-1.075 5.323-1.878 5.359-5.687a3.502 3.502 0 01-1.75-3.026c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_date" xmlns="http://www.w3.org/2000/svg"><path d="M27.192 28.844V11.192H4.808v17.652h22.384zm0-25.689q1.277 0 2.253.976t.976 2.253v22.459q0 1.277-.976 2.216t-2.253.939H4.808q-1.352 0-2.291-.901t-.939-2.253V6.385q0-1.277.939-2.253t2.291-.976h1.577V.001h3.23v3.155h12.769V.001h3.23v3.155h1.577zm-3.155 11.267v3.155h-3.23v-3.155h3.23zm-6.46 0v3.155h-3.155v-3.155h3.155zm-6.384 0v3.155h-3.23v-3.155h3.23z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_download" xmlns="http://www.w3.org/2000/svg"><path d="M2.866 28.209h26.269v3.79H2.866v-3.79zm26.268-16.925L16 24.418 2.866 11.284h7.493V.001h11.283v11.283h7.493z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_email" xmlns="http://www.w3.org/2000/svg"><path d="M28.845 9.615v-3.23L16 14.422 3.155 6.385v3.23L16 17.577zm0-6.46q1.277 0 2.216.977T32 6.385v19.23q0 1.277-.939 2.253t-2.216.977H3.155q-1.277 0-2.216-.977T0 25.615V6.385q0-1.277.939-2.253t2.216-.977h25.69z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_git" xmlns="http://www.w3.org/2000/svg"><path d="M27.472 12.753L15.247.529a1.803 1.803 0 00-2.55 0l-2.84 2.84 2.137 2.137a2.625 2.625 0 013.501 3.501l3.499 3.499a2.625 2.625 0 11-1.237 1.237l-3.499-3.499c-.083.04-.169.075-.257.106v7.3a2.626 2.626 0 11-1.75 0v-7.3a2.626 2.626 0 01-1.494-3.607L8.62 4.606l-8.09 8.09a1.805 1.805 0 000 2.551l12.225 12.224a1.803 1.803 0 002.55 0l12.168-12.168a1.805 1.805 0 000-2.551z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_github" xmlns="http://www.w3.org/2000/svg"><path d="M16 .394c8.833 0 15.999 7.166 15.999 15.999 0 7.062-4.583 13.062-10.937 15.187-.813.146-1.104-.354-1.104-.771 0-.521.021-2.25.021-4.396 0-1.5-.5-2.458-1.083-2.958 3.562-.396 7.312-1.75 7.312-7.896 0-1.75-.625-3.167-1.646-4.291.167-.417.708-2.042-.167-4.25-1.333-.417-4.396 1.646-4.396 1.646a15.032 15.032 0 00-8 0S8.937 6.602 7.603 7.018c-.875 2.208-.333 3.833-.167 4.25-1.021 1.125-1.646 2.542-1.646 4.291 0 6.125 3.729 7.5 7.291 7.896-.458.417-.875 1.125-1.021 2.146-.917.417-3.25 1.125-4.646-1.333-.875-1.521-2.458-1.646-2.458-1.646-1.562-.021-.104.979-.104.979 1.042.479 1.771 2.333 1.771 2.333.938 2.854 5.396 1.896 5.396 1.896 0 1.333.021 2.583.021 2.979 0 .417-.292.917-1.104.771C4.582 29.455-.001 23.455-.001 16.393-.001 7.56 7.165.394 15.998.394zM6.063 23.372c.042-.083-.021-.187-.146-.25-.125-.042-.229-.021-.271.042-.042.083.021.187.146.25.104.062.229.042.271-.042zm.646.709c.083-.062.062-.208-.042-.333-.104-.104-.25-.146-.333-.062-.083.062-.062.208.042.333.104.104.25.146.333.062zm.625.937c.104-.083.104-.25 0-.396-.083-.146-.25-.208-.354-.125-.104.062-.104.229 0 .375s.271.208.354.146zm.875.875c.083-.083.042-.271-.083-.396-.146-.146-.333-.167-.417-.062-.104.083-.062.271.083.396.146.146.333.167.417.062zm1.187.521c.042-.125-.083-.271-.271-.333-.167-.042-.354.021-.396.146s.083.271.271.312c.167.062.354 0 .396-.125zm1.313.104c0-.146-.167-.25-.354-.229-.187 0-.333.104-.333.229 0 .146.146.25.354.229.187 0 .333-.104.333-.229zm1.208-.208c-.021-.125-.187-.208-.375-.187-.187.042-.312.167-.292.312.021.125.187.208.375.167s.312-.167.292-.292z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_gitlab" xmlns="http://www.w3.org/2000/svg"><path d="M1.629 11.034L14 26.888.442 17.048a1.09 1.09 0 01-.39-1.203l1.578-4.811zm7.217 0h10.309l-5.154 15.854zM5.753 1.475l3.093 9.559H1.63l3.093-9.559a.548.548 0 011.031 0zm20.618 9.559l1.578 4.811c.141.437-.016.922-.39 1.203l-13.558 9.84 12.371-15.854zm0 0h-7.216l3.093-9.559a.548.548 0 011.031 0z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_heart" xmlns="http://www.w3.org/2000/svg"><path d="M16 29.714a1.11 1.11 0 01-.786-.321L4.072 18.643c-.143-.125-4.071-3.714-4.071-8 0-5.232 3.196-8.357 8.535-8.357 3.125 0 6.053 2.464 7.464 3.857 1.411-1.393 4.339-3.857 7.464-3.857 5.339 0 8.535 3.125 8.535 8.357 0 4.286-3.928 7.875-4.089 8.035L16.785 29.392c-.214.214-.5.321-.786.321z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_keyborad_arrow_down" xmlns="http://www.w3.org/2000/svg"><path d="M3.281 5.36L14 16.079 24.719 5.36 28 8.641l-14 14-14-14z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_keyborad_arrow_left" xmlns="http://www.w3.org/2000/svg"><path d="M25.875 28.25L22.125 32 6.126 16.001 22.125.002l3.75 3.75-12.25 12.25z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_keyborad_arrow_right" xmlns="http://www.w3.org/2000/svg"><path d="M6.125 28.25L18.375 16 6.125 3.75 9.875 0l15.999 15.999L9.875 31.998z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_link" xmlns="http://www.w3.org/2000/svg"><path d="M24.037 7.963q3.305 0 5.634 2.366T32 16t-2.329 5.671-5.634 2.366h-6.46v-3.08h6.46q2.028 0 3.493-1.465t1.465-3.493-1.465-3.493-3.493-1.465h-6.46v-3.08h6.46zM9.615 17.578v-3.155h12.77v3.155H9.615zM3.005 16q0 2.028 1.465 3.493t3.493 1.465h6.46v3.08h-6.46q-3.305 0-5.634-2.366T0 16.001t2.329-5.671 5.634-2.366h6.46v3.08h-6.46q-2.028 0-3.493 1.465t-1.465 3.493z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_menu" xmlns="http://www.w3.org/2000/svg"><path d="M.001 5.334h31.998v3.583H.001V5.334zm0 12.416v-3.5h31.998v3.5H.001zm0 8.916v-3.583h31.998v3.583H.001z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_notification" xmlns="http://www.w3.org/2000/svg"><path d="M22.615 19.384l2.894 2.894v1.413H2.49v-1.413l2.894-2.894V12.25q0-3.365 1.716-5.856t4.745-3.231v-1.01q0-.875.606-1.514T13.999 0t1.548.639.606 1.514v1.01q3.029.74 4.745 3.231t1.716 5.856v7.134zM14 27.999q-1.211 0-2.053-.808t-.841-2.019h5.788q0 1.144-.875 1.986T14 27.999z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_path" xmlns="http://www.w3.org/2000/svg"><path d="M28 12.62h-9.793V8.414h-2.826v11.173h2.826v-4.206H28V26.62h-9.793v-4.206H12.62v-14H9.794v4.206H.001V1.381h9.793v4.206h8.413V1.381H28V12.62z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_person" xmlns="http://www.w3.org/2000/svg"><path d="M16 20.023q5.052 0 10.526 2.199t5.473 5.754v4.023H0v-4.023q0-3.555 5.473-5.754t10.526-2.199zM16 16q-3.275 0-5.614-2.339T8.047 8.047t2.339-5.661T16 0t5.614 2.386 2.339 5.661-2.339 5.614T16 16z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_search" xmlns="http://www.w3.org/2000/svg"><path d="M11.925 20.161q3.432 0 5.834-2.402t2.402-5.834-2.402-5.834-5.834-2.402-5.834 2.402-2.402 5.834 2.402 5.834 5.834 2.402zm10.981 0L32 29.255 29.255 32l-9.094-9.094v-1.458l-.515-.515q-3.26 2.831-7.721 2.831-4.976 0-8.45-3.432T.001 11.925t3.474-8.45 8.45-3.474 8.407 3.474 3.432 8.45q0 1.802-.858 4.075t-1.973 3.646l.515.515h1.458z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_shield" xmlns="http://www.w3.org/2000/svg"><path d="M22.167 15.166V3.5h-8.166v20.726c.93-.492 2.424-1.349 3.883-2.497 1.95-1.531 4.284-3.919 4.284-6.562zm3.499-13.999v14c0 7.674-10.737 12.523-11.192 12.724-.146.073-.31.109-.474.109s-.328-.036-.474-.109c-.456-.201-11.192-5.049-11.192-12.724v-14C2.334.529 2.863 0 3.501 0H24.5c.638 0 1.167.529 1.167 1.167z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_tags" xmlns="http://www.w3.org/2000/svg"><path d="M6.606 7.549c0-1.047-.84-1.887-1.887-1.887s-1.887.84-1.887 1.887.84 1.887 1.887 1.887 1.887-.84 1.887-1.887zm15.732 8.493c0 .501-.206.988-.546 1.327l-7.239 7.254c-.354.339-.84.546-1.342.546s-.988-.206-1.327-.546L1.342 14.066C.59 13.329 0 11.899 0 10.852V4.718a1.9 1.9 0 011.887-1.887h6.134c1.047 0 2.477.59 3.229 1.342L21.792 14.7c.339.354.546.84.546 1.342zm5.661 0c0 .501-.206.988-.546 1.327l-7.239 7.254c-.354.339-.84.546-1.342.546-.767 0-1.15-.354-1.651-.87l6.93-6.93c.339-.339.546-.826.546-1.327s-.206-.988-.546-1.342L13.609 4.173c-.752-.752-2.182-1.342-3.229-1.342h3.303c1.047 0 2.477.59 3.229 1.342L27.454 14.7c.339.354.546.84.546 1.342z"/></symbol></svg>



    <div class="wrapper ">
        <input type="checkbox" class="hidden" id="menu-control" />
        
        <header class="gdoc-header">
    <div class="container flex align-center justify-between">
        
        <label for="menu-control" class="gdoc-nav__control">
            <svg class="icon gdoc_menu"><use xlink:href="#gdoc_menu"></use></svg>
            <svg class="icon gdoc_arrow_back"><use xlink:href="#gdoc_arrow_back"></use></svg>
        </label>
        
        <a class="gdoc-header__link" href="http://example.org/">
            <span class="gdoc-brand flex align-center">
                <img class="gdoc-brand__img" src="/brand.svg" alt="">
                WebAssemnbly
            </span>
        </a>
        <span id="gdoc-dark-mode">
            <svg class="icon gdoc_brightness_dark"><use xlink:href="#gdoc_brightness_dark"></use></svg>
            <svg class="icon gdoc_brightness_light"><use xlink:href="#gdoc_brightness_light"></use></svg>
            <svg class="icon gdoc_brightness_auto"><use xlink:href="#gdoc_brightness_auto"></use></svg>
        </span>
    </div>
</header>


        <main class="container flex flex-even">
            
            <aside class="gdoc-nav">
                <nav>
    
    <div class="gdoc-search">
        <svg class="icon gdoc_search"><use xlink:href="#gdoc_search"></use></svg>
        <input type="text" id="gdoc-search-input" class="gdoc-search__input" placeholder="Search..."
            aria-label="Search" maxlength="64" />
        <div class="gdoc-search__spinner spinner hidden"></div>
        <ul id="gdoc-search-results" class="gdoc-search__list"></ul>
    </div>



    <section class="gdoc-nav--main">
        <h2>Navigation</h2>
        
            




<ul class="gdoc-nav__list">

    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                
                <a href="/"
                    class="gdoc-nav__entry ">
                    Index
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                
                <a href="/Talk_jsdayes2017/"
                    class="gdoc-nav__entry is-active">
                    Talk @ JsDayES, 2017, Madrid
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                
                <a href="/Talk_LjPyMeetup2019/"
                    class="gdoc-nav__entry ">
                    Talk @ LjPyMeetup, 2019, Ljubljana
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                
                <a href="/How_to_install_Emscripten/"
                    class="gdoc-nav__entry ">
                    How to install Emscripten
                </a>
            </span>
            
        

        
    </li>


</ul>





        
    </section>

    <section class="gdoc-nav--more">
        
    </section>
</nav>

            </aside>
            

            <div class="gdoc-page">
                
    


    






<div class="gdoc-page__header flex flex-wrap
     justify-between 
     hidden-mobile 
    " itemprop="breadcrumb">
    
    <div>
        <svg class="icon gdoc_path hidden-mobile"><use xlink:href="#gdoc_path"></use></svg>
        <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
            
            
            
            
    
    
        
        
        
        
    
    
        <li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><a itemscope itemtype='https://schema.org/WebPage' itemprop='item' itemid='/' href='/'><span itemprop='name'>WebAssembly</span></a><meta itemprop='position' content='1' /></li><li> / </li><li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><span itemprop='name'>Talk @ JsDayES, 2017, Madrid</span><meta itemprop='position' content='2' /></li>
    

    

        </ol>
    </div>
    
    
</div>

    <article class="gdoc-markdown gdoc-markdown__align--left">
        <h1>Talk @ JsDayES, 2017, Madrid</h1>
        <h1 id="intro">Intro</h1>
<h2 id="me">Me</h2>
<p>Hello,
My name is Matjaz, I am working on road management software. This is a 3D viewer that shows scan of a road surface. We display those in browser, generate reports and stuff like that. When I heard of WebAssembly I was very interested because speed of calculations on the client side is very important for us. WebAssembly also makes in convenient to reuse existing C++ libraries in browser.</p>
<h2 id="webassembly-basics">WebAssembly basics</h2>
<blockquote>WebAssembly is a format suitable for compilation to the web.</blockquote>
<p>It is like .exe, or whatever your device runs, that can run in browser. It is portable and runs in a sandbox, so it is secure. WebAssembly code runs in the same context as other JavaScript code, in the same thread. In fact it&rsquo;s possible to seamlessly call functions in WebAssembly from JavaScript and the other way around. WebAssembly is not a programming language. It&rsquo;s a binary format produced by a compiler. At the moment there exists a very good C++ compiler called Emscripten. There are also some game engines that support targeting WebAssembly, namely Unity engine and Unreal engine. This means we are about to see some very high quality games running in browsers. I hope you will be convinced how WebAssembly is awesome and fast by the end of this presentation.</p>
<p>This is a really impressive WebAssembly demo. It is a scene made with Unreal Engine 4. The same engine that was used to make the newest Unreal Tournament game. It&rsquo;s in the top league of game engines and now it can run in a web browser!  <a href="https://s3.amazonaws.com/mozilla-games/ZenGarden/EpicZenGarden.html">https://s3.amazonaws.com/mozilla-games/ZenGarden/EpicZenGarden.html</a></p>
<p>No plugins. No Flash, no Java. Just WebGL and WebAssembly. And if you are a game developer, making a portable game with engines such as Unity or Unreal Engine is really simple. You design your game and the engine is capable of producing version in WebAssembly, native, Android, Playstation and so on. And if you export your game in WebAssembly you have one binary that works on phones, tablets and PCs. And who knows, maybe someday even supercomputers.
In fact WebAssembly is not restricted to browser environments. In theory it is even possible to make a hardware chip that would run WebAssembly directly without additional software. There is an experimental project called Wasmachine. <a href="https://github.com/piranna/wasmachine">https://github.com/piranna/wasmachine</a> The goal is to run WebAssembly directly on a chip. For development they use FPGAs which are chips where you can reprogram their logic. The author of that project is Jesus  In future and with enough money there could be processors that would just run WebAssembly instead of x86. The author of Wasmachine is Jesús Leganés-Combarro and he is presenting NodeOS in the next room at the moment.</p>
<h2 id="usage-scenarios">Usage scenarios</h2>
<p>At the moment WebAssembly can be used in a couple of different ways. Maybe you have an existing application and you want to speed up a certain algorithm in it. WebAssembly might help in scenario like that. Or maybe you want to reuse existing C++ library. There are still tons of things that we don&rsquo;t do in Javascript just because of lack of libraries. Encryption is one such example. Only specialists implement encryption algorithms. Just a few weeks ago there was a conference called WebCamp in Ljubljana. There was also a presentation about security and the expert who was presenting said that you should never attempt to implement encryption algorithm yourself unless you have a couple of PhDs from math and computer science. Now that we have WebAssembly we don&rsquo;t have to reimplement them, we can just recompile libraries that already exist. Third use case for WebAssembly is making apps that are essentially just WebAssembly with minimal amounts of JavaScript. If you are making something that uses OpenGL and some computation the Emscripten compiler will generate needed .HTML and JavaScript for you. So you only touch C++ code, compile it and run that in browser.</p>
<h1 id="deep-dive">Deep dive</h1>
<p>Now let&rsquo;s work through an example of using WebAssembly in our existing apps. Let&rsquo;s say you have a web application. It mostly runs OK but there is an algorithm that is just too slow in JavaScript. We want to try writing it in C++ and see if that helps.</p>
<p>This is our example app. It prints the biggest prime number that is smaller than N. For example if I type 10, the biggest prime number less or equal to 10 is 7.
The application uses an algorithm called Sieve of Erathostenes. It loops through all numbers from two to whichever we want. First we have two, we know it&rsquo;s a prime but we also know that all other even numbers are not primes so we cross them over. Then we go to number three. It&rsquo;s a prime, but six, nine, twelve and so on are not. And then we get to number four which was already crossed out. And so on until we check all primes until N. Then we print out the biggest one we found.</p>
<p>This is an implementation of the algorithm in JavaScript. The input is N and the output is the biggest prime less or equal than N. First we make an array with elements with indexes up until N. This means the array will have N+1 elements and we will just ignore the 0 at the beginning. It makes the code easier to read because we don&rsquo;t have any offsets. This is the outer loop that goes from two to N. If we know the number is not prime, we do nothing. If it is prime, we go to the inner loop and cross over all it&rsquo;s multiples.</p>
<p>This implementation will be fine for small numbers but for bigger ones C++ will give us some extra performance. Algorithms like that are ideal candidates for optimizing by rewriting them in C++.</p>
<p>To do that we need a compiler to produce WebAssembly from some programming language. We will use Emscripten to compile C++ code.  Emscripten is based on a suite of compiler components called LLVM. This means we are actually getting a very good and stable C++ compiler. LLVM has a long history and it supports new C++ features that were added in the last couple of years. Emscripten basically just adds support for generating WebAssembly output in addition to native machine code. It also ships with standard C++ library and implements some common multimedia APIs such as OpenGL and it does that just by calling WebGL. LLVM is not limited to C++, in fact there are LLVM-based compilers for other languages but I am not aware whether you can compile to WebAssembly from any of them.</p>
<p>You can see the procedure for installing Emscripten in this slide. At the moment we have to install Emscripten from <code>incoming</code> branch because Webassembly support hasn&rsquo;t been added to the stable version yet. The slides will be online. I alredy installed Emscripten on this computer to make sure nothing goes wrong.</p>
<p>The implementation in C++ is mostly the same. I just copy pasted the code, added types and changed how array is initialized. At the end I used emscripten bindings to expose my function so that it can be called from Javascript.</p>
<p>Exposing a function that takes a number and returns a number is really simple. Emscripten is able to figure out datatypes and conversions between C++ and Javascript. For classes and more complex structures you need to put in some more work but it&rsquo;s not too complicated. More information about exposing C++ APIs to JavaScript is available on Emscripten home page. <a href="https://kripken.github.io/emscripten-site/docs/porting/connecting_cpp_and_javascript/embind.html">https://kripken.github.io/emscripten-site/docs/porting/connecting_cpp_and_javascript/embind.html</a></p>
<p>Then we compile this code using emcc and we get .js and .wasm file. Generated JavaScript file will take care of loading the .wasm module and exposing all the functions and classes that you exposed to JavaScript.</p>
<p>We edit <code>index.html</code> by adding <code>&lt;script&gt;</code> tag that loads the generated Javascript file and replace call to Javascript implementation with C++ implementation.</p>
<p>This example is not really realistic but I think you get the idea. More realistic example is a video editor that implements effects using WebAssembly.</p>
<h2 id="video-editor">Video editor</h2>
<p><a href="https://d2jta7o2zej4pf.cloudfront.net/">https://d2jta7o2zej4pf.cloudfront.net/</a></p>
<p>Here we have a selection of effects that we can apply to a video. And on the right side we see two charts. The blue one shows framerate if video is processed in Javascript and the green one shows framerate when we process video in C++ and ship that as a WebAssembly binary. Multimedia is really an extreme example where a lot of data has to be moved. It&rsquo;t really an ideal use case for technology such as WebAssembly. But WebAssembly is not only about performance. It might also be about saving battery. If some calculation is performed faster it means that processor has to run at full frequency for less time. And that will make users of mobile devices very happy.</p>
<p>Let&rsquo;s take a closer loop at WebAssembly format.  <a href="https://mbebenita.github.io/WasmExplorer/">https://mbebenita.github.io/WasmExplorer/</a></p>
<pre><code>int sum(int a, int b) {
  return a+b;
}
</code></pre><p>This is a tool called WasmExplorer. What we see is a function in C++ and then the same function compiled to WASM and x86 binary. We can see precisely that the compiler already figured out that we want to take two parameters and do 32-bit integer addition. If you imagine a similar function in JavaScript, the types of arguments can be anything and the JavaScript engine has to figure out what the plus sign actually means. It can be summation of numbers, it can be concatenation of strings or something invalid. And after it figures that out it also needs to decide whether any of the parameters need to be converted into another data type. Only after all these steps it can actually perform the operation. In contrast compiler does all those decisions up front in the WebAssembly case. Going from WebAssembly to native machine code is mostly glorified search and replace.</p>
<p>Another important consideration besides performance is security. Why is WebAssembly secure? There are a couple of reasons. First, WebAssembly has a limited set of instructions compared to native x86. It only supports numerical operations, branching and loops.
Second, functions calls are controlled. WebAssembly programs can only communicate with environment using imported and exported functions and a block of linear memory. WebAssembly code is loaded with a special JavaScript API and when we run WebAssembly program, we also need to specify table of functions that WebAssembly program can call. And because we are in JavaScript there is no way to put there anything else than what is already accessible there. WebAssembly programs cannot call anything that you can&rsquo;t call from JavaScript already and they are restricted by same cross origin policies and similar checks.
Another important property of WebAssembly is that linear memory for the data is separated from program code. This is important because it makes it harder to corrupt the program code itself if something goes wrong. In native x86 architecture program code and data is not separated. You can have bytes of data that were entered by the user or read from file and after that you can have binary instructions for some function that you call later. But if there is a bug in the program and the program reads input that is longer than the reserved space, It will overwrite its own instructions. This is called buffer overflow and it is one of the most common reasons for security issues with software. However, because data memory of a WebAssembly program is separated from the program itself, such problems should not occur.</p>
<h1 id="opencv-demo">OpenCV demo</h1>
<p>Now let&rsquo;s take a look at another more fun demo. Here we are taking live video from the Webcam on this laptop and performing face detection. For face detection I used a library called OpenCV. It&rsquo;s written in C++ and obviously I wouldn&rsquo;t want to rewrite it to JavaScript. Fortunately, because of WebAssembly, I can just compile it with Emscripten and use it in browser.</p>
<p>We are getting video from camera and then we send video frame to some C++ code that runs OpenCV algorithm for detecting faces. C++ returns coordinates of those faces and the eyes and we render them on a canvas. Computer vision code is running in a WebWorker to keep the browser responsive. WebWorker is some JavaScript code that takes care of passing data between computer vision algorithm in WebAssembly format and JavaScript that runs on the page. WebAssembly is produced by compiling OpenCV and a tiny C++ program that uses the library to do exactly what we need here and exposes those functions to JavaScript.</p>
<h1 id="browser-support-polyfilling">Browser support, polyfilling</h1>
<p>According to caniuse.com 52% of internet users can already run WebAssembly. It was developed in consensus between Chrome, Edge, Firefox and WebKit. This means that support is coming to all major browsers. For older browsers you can also compile to asm.js which should work on all browsers that have typed arrays.</p>
<h1 id="conclusion">Conclusion</h1>
<h2 id="problems-i-faced">Problems I faced</h2>
<p>Before I conclude I will say a few words about problems I faced when experimenting with WebAssembly.
One of the problems was that I was expecting documentation at WebAssembly.org. But as it turns out as a developer you should mostly read documentation provided by your compiler, for example Emscripten. Which Emscripten I needed to figure out what various parameters mean. Example of an important parameter is <code>-s NO_EXIT_RUNTIME=1</code>. Normally, without this option, Emscripten will clean up everything after main() function in C++ code terminates. This is fine, if you wrote the whole application in C++ but it&rsquo;s bad if you are calling specific functions from JavaScript when you need them. That option will prevent cleaning up of memory and other important stuff after main() is done.</p>
<p>I&rsquo;ve been also spending time on finding ways to efficiently transfer data between JavaScript and C++. These data transfers are very expensive when you are trying to transfer pixels at 60 frames per second. You want to do the least amount of copying as possible.</p>
<p>Another awkward subject when interfacing C++ and JavaScript are objects. JavaScript has a garbage collector that detects which objects cannot be accessed and deletes them automatically. However in C++ memory management is manual. You need to know which objects have to be manually deleted and when. Otherwise you either run out of memory or try to access an object that does not exist anymore.</p>
<p>In bigger applications that use Angular I found it convenient to wrap calls to WebAssembly inside a service. That way angular calls a function before service or a component is destroyed so I know exactly when I need to clean up WebAssembly stuff.</p>
<h2 id="suggested-path-for-learning-all-this">Suggested path for learning all this</h2>
<p>WebAssembly is an opportunity to learn new programming languages. I would say it&rsquo;s best to learn C++ first without WebAssembly and just learn how C++ programmers think and what tools they use and only add WebAssembly later. Limiting yourself like that is a good tactic to not get overwhelmed by all new stuff that you need to learn. Make sure the literature is up to date because a lot has changed in the last 6 years in the C++ land. There were lots of improvements to the language and the standard library.</p>
<h2 id="planned-webassembly-features">Planned WebAssembly features</h2>
<p>WebAssembly as it is now is only a so called minimum viable product. It&rsquo;s a start but to make it really useful it still needs some work. Currently the browser vendors are working on multithreading and SIMD instructions.</p>
<h3 id="threads">Threads</h3>
<p>Browsers already have support for WebWorkers which is a way of multithreading but it is limited. Data between WebWorkers cannot be shared. It can be copied or moved but two WebWorkers cannot work on same piece of data at the same time. WebAssembly will have actual threads as they exist in other languages. This will offer great speed improvements, way beyond of what is available now. In optimistic benchmarks WebAssembly is 10, 20, 30 or so percent faster. Multithreading will speed up some algorithms 2, 4 or 8 times, depending on have many cores you have on your processor.</p>
<h3 id="simd-instructions">SIMD instructions</h3>
<p>Another important feature that is planned is support for SIMD instructions. Modern processors have special instructions that can execute same operation on multiple pieces of data. Let&rsquo;s imagine we have two three-dimensional vectors and we want to compute their SUM. How do you do that? First you take x components of both vectors and add them together. Then you do the same for Y and then you do the same for Z. But if you have access to SIMD instructions you can do all three in one step. Again this speeds up computations a lot. All algorithms involving graphics or sound or linear algebra have tons of computations like that. SIMD instructions mean we can again expect speed-ups of around 4-times for ideal case.</p>
<p>Both of these features mean that we will get around 16-times faster calculations. Of course this will only be valid for ideal algorithms. But surely it will be noticeable for the multimedia.</p>
<h3 id="more-tooling-more-compilers">More tooling, more compilers</h3>
<p>Currently Emscripten is a very decent C++ compiler and there is a compiler for Rust as well. There was an experiment to bring languages from .NET ecosystem to WebAssembly but unfortunately that project doesn&rsquo;t seem to be active. I am hoping there will be more and more compilers after as time passes.</p>
<h1 id="conclusion-1">Conclusion</h1>
<p>Hopefully this talk will inspire you to try WebAssembly and get inspired by new possibilities. Although C++ can look frightening, it becomes fun when you know that you can control what you program does. It gives you kind of power that you don&rsquo;t get from languages such as JavaScript. You can control exactly when piece of memory is allocated and when something is deleted. You know exactly how many bytes you an instance of you class needs. You get to tweak your code and watch compiler&rsquo;s output and see when you get most done with least amount of processor instructions.</p>
<p>I invite you to hack and make better developer tools related to this technology. I just recently heard that developer tools in Firefox are actually a separate project on GitHub. It&rsquo;s a React application so any JavaScript developer can change it. And I am hoping someone will bring Go, Haskell and other cool languages to the web as well.</p>
<h1 id="thank-you">Thank you</h1>


    </article>

                








    
    

    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            
                
                
            

            
        

        
        
    
        
        

        
        
            
            
            

            
                
                
            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    





<div class="gdoc-page__footer flex flex-wrap justify-between">
    
    
        <span class="gdoc-page__nav">
            
                <a class="gdoc-page__nav--prev flex align-center" href="/" title="Index"> Index</a>
            
        </span>
        <span class="gdoc-page__nav">
            
                <a class="gdoc-page__nav--next flex align-center" href="/Talk_LjPyMeetup2019/" title="Talk @ LjPyMeetup, 2019, Ljubljana">Talk @ LjPyMeetup, 2019, Ljubljana </a>
            
        </span>
    
</div>

            </div>
        </main>

        <footer class="gdoc-footer">
    <div class="container flex flex-wrap">
        <span class="gdoc-footer__item">
            Built with <a href="https://gohugo.io/" class="gdoc-footer__link">Hugo</a> and
            <svg class="icon gdoc_heart"><use xlink:href="#gdoc_heart"></use></svg>
        </span>
        
        
    </div>
</footer>

    </div>

    




<script defer src="/js/en.search.min.776f72091817509bd4a2dd4af9d3fd75134b5a2bb73a787026c3a95ee0f43686.js"></script>



<script defer src="/js/clipboard-27784b7376.min.js"></script>
<script defer src="/js/clipboard-loader-f0b5fbd5f6.min.js"></script>


</body>
</html>
